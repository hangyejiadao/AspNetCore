@{
    ViewBag.Title = "UrlOneIndex";
    Layout = "~/Views/BasePage/_LayoutMsSysEmpty.cshtml";
}

<link href="~/Content/Components/Bootstrap/css/bootstrap.min.css" rel="stylesheet" />

<script src="~/Content/Components/AngularJS/angular.min.js"></script>

<script src="~/Content/Js/Base/jpager.js"></script>


<style type="text/css">
    body {
        background-color: rgb(240, 245, 246);
    }

    .ibox-title {
        position: absolute;
        width: 100%;
        height: 45px;
        overflow: hidden;
        padding: 5px 5px;
        margin: 5px 5px;
        background-color: #fff;
    }

    .ibox-body {
        position: absolute;
        top: 55px;
        width: 100%;
        height: 92%;
        overflow-x: hidden;
        overflow-y: auto;
        padding: 0px 0px;
        margin: 0px 5px 5px 5px; /*上  右  下  左*/
        background-color: #fff;
    }
</style>





<div ng-app="pageApp" ng-controller="pageCtrl">
    <div class="ibox-title">
        <a href="javascript:;" style="margin-left:20px" ng-repeat="item in items"
           ng-class="{true:'btn btn-info',false:'btn btn-default'}[$index==index]" ng-click="selectItem($index)">
            {{::item.name}}
        </a>
    </div>

    <div class="ibox-body">
        <iframe id="myiframe" scrolling="auto" frameborder="0" style="width:100%;height:99%"
                src="UrlMsgIndex"></iframe>

    </div>
</div>




<script type="text/javascript">
    $(function () {


    })

    //初始化Angular
    var pageApp = angular.module('pageApp', []);
    pageApp.controller('pageCtrl', function ($scope, $http, $timeout) {
        initNgData($scope, $http);
        initNgEvent($scope, $http, $timeout);
    });

    //初始化ng数据
    function initNgData($scope, $http) {
        $scope.index = 0;
        $scope.items = [];
    }

    //初始化ng事件
    function initNgEvent($scope, $http, $timeout) {

        $scope.selectItem = function (index) {
            $scope.index = index;
            var ifmEle = document.getElementById('myiframe');
            ifmEle.src = $scope.items[index].url;
        };
    }

    function ModuleQuery(data) {
        //alert("查询数据" + JSON.stringify(data));
        var appElement = document.querySelector('[ng-controller=pageCtrl]');
        var $scope = angular.element(appElement).scope();
        paramsData.LoadApi = 1;
        paramsData.TargetId = data.TargetId;
        $scope.loadData();
    }


    function ModuleQuery(data) {
        //alert("查询数据" + JSON.stringify(data));

        var extraData = data.ExtraData;
        var url = "UrlMsgIndex";

        var appElement = document.querySelector('[ng-controller=pageCtrl]');
        var $scope = angular.element(appElement).scope();

        if (extraData != null) {
            $scope.items = JSON.parse(extraData.Volume);
            url = $scope.items[0].url;
        } else {
            $scope.items = [];
        }

        $scope.$apply();

        var ifmEle = document.getElementById('myiframe');
        ifmEle.src = url;

    }


</script>

