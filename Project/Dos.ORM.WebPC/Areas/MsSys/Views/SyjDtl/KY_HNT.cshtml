@model Dos.ORM.Model.Business.TW_SYJZBDto
@{
    //ViewBag.Title = "KY_HNT";
    string[] pic = ViewBag.pic;
    string[] labels = ViewBag.txtLabel;
    string[] txtDatas = ViewBag.txtData1;
    Layout = "";
}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html ng-app="app">
<head>
    <title></title>
    <meta name="keywords" content="GetDataOddIncreaseEvenDecrease">
    <meta content="True" name="vs_snapToGrid">
    <meta content="Microsoft Visual Studio .NET 7.1" name="GENERATOR">
    <meta content="C#" name="CODE_LANGUAGE">
    <meta content="JavaScript" name="vs_defaultClientScript">
    <meta content="http://schemas.microsoft.com/intellisense/ie5" name="vs_targetSchema">
    <script src="~/Scripts/jquery-1.10.2.js?id=d"></script>
    <script src="~/Content/Components/EasyUI/jquery.easyui.min.js"></script>
    <script src="~/Scripts/dismrclick.js"></script>
    <script src="~/Scripts/input.js"></script>
    <link href="~/Content/assets/global/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <!-- Bootstrap core CSS -->
    <link href="~/Content/Css/Areas/MsSys/BootStrap/css/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/Css/Areas/MsSys/BootStrap/css/dashboard.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="~/Content/Components/EasyUI/themes/default/easyui.css" rel="stylesheet" />
    <script src="~/Scripts/Chart.js"></script>
    <script src="~/Content/Js/Module/Business/functions.js"></script>
    <link href="~/Content/Css/Areas/MsSys/ReportFormStyle.css" rel="stylesheet" />
    <script src="~/Content/Components/AngularJS/angular.min.js"></script>
    <style media="print" type="text/css">
        .noprint {
            display: none;
        }

        .tableIcons {
            position: absolute;
            right: 10px;
            z-index: 1;
            height: 36px;
            top: 0;
            background: #eeeeee;
            padding: 0 10px;
            border-left: 1px solid #e3e3e3;
        }

        .printReport {
            background: #EFEFF2;
            height: 36px;
            line-height: 36px;
        }

        .nav-left {
            overflow: hidden;
        }

        .nav-right {
            background: #f7f7f9;
            border-left: 1px solid #dedede;
        }
        label {
            display: inline-block;
            max-width: 100%; /*// Force IE8 to wrap long content (see https://github.com/twbs/bootstrap/issues/13141)*/
            margin-bottom: 5px;
      
        }
    </style>

    <script>
        Chart.defaults.global.tooltips.enabled = false;
        Chart.defaults.global.animation.duration = 0;
        Chart.defaults.global.defaultFontColor = 'rgba(0,0,0,1)';
        var options = {
            legend: { display: false },
            scales: {
                xAxes: [{
                    ticks: {
                        maxTicksLimit: 20
                    }
                }]
            }
        }
        var chartData = {
            labels: '',
            datasets: [
                {
                    data: '',
                    fill: false,
                    lineTension: 0,
                    borderWidth: 1,
                    borderColor: 'rgba(0,0,0,1)',
                    pointRadius: 0,
                    spanGaps: true
                }
            ]
        }
        window.onload = function () {

            var cj = $('#tsycc').val();

            if (cj == "150mm×150mm" || cj == "150mm×150mm×150mm") {
                cj = "150×150×150";
            }
            var area = GetNum(cj);

            //for (var i = 1; i <= 3; i++) {
            //    var f = parseFloat($('#thz' + i).val()) * 1000;
            //    $('#tqd' + i).val(GetDataOddIncreaseEvenDecrease((f / area), -1));
            //    if (isNaN($('#tqd' + i).val()))
            //        $('#tqd' + i).val("");
            //}

            var IsNumber = /^[0-9]+.?[0-9]*$/;
            var flag = true;
            var arr = new Array();
            for (var i = 1; i <= 3; i++) {
                arr[i] = parseFloat($('#tqd' + i).val().substr(1)); 
                if (!IsNumber.test(arr[i])) flag = false;
            }

           



            for (var i = 1; i <= 3; i++) {
                if ($('#txtLabel' + i).val() != '' && $('#txtData' + i).val() != '') {
                    $('#link' + i).css('display', 'none');
                    $('#canvas' + i).css('display', 'block');

                    chartData.labels = $('#txtLabel' + i).val().split(',');
                    chartData.datasets[0].data = $('#txtData' + i).val().split(',');
                    try {
                        var ctx = document.getElementById('canvas' + i).getContext('2d');
                        var myNewChart = new Chart(ctx, { type: 'line', data: chartData, options: options });
                    } catch (e) {

                    }
                }
            }
        }


        function printit() {
            var doc = document.getElementById("mainFrame").contentWindow.document;
            var old_color = doc.body.bgColor;
            var print_color = "#FFFFFF";

            var all = new Array();
            all = doc.getElementsByTagName("input");
            for (i = 0; i < all.length; i++) {
                if ((all[i].type == "text") || (all[i].type == "textarea")) {
                    if (all[i].value == "/") {
                        all[i].value = "";
                    }
                    all[i].style.backgroundColor = print_color;
                    all[i].style.borderWidth = 0;
                }
            }

            document.getElementById("mainFrame").contentWindow.focus();

            document.getElementById("mainFrame").contentWindow.document.body.style.backgroundColor = print_color;

            document.getElementById("mainFrame").contentWindow.print();
            document.getElementById("mainFrame").contentWindow.document.body.style.backgroundColor = old_color;
        }
    </script>
</head>
<body bgcolor="#FFFFFF" style="background-color: #FFFFFF">
    
    <form id="form1" ng-controller="ctr">
    
        <table style="WIDTH: 640px; height: 50px; text-align: center; margin-top: -5px;" align="center">
            <tr>
                <td><span style="font-size: 16pt; margin: 0 auto;" ng-click="testA();">混凝土抗压强度试验</span></td>
            </tr>
        </table>
        <table id="fromxml" cellpadding="1" cellspacing="0" bordercolor="#000000" style="BORDER-RIGHT: 2px solid black; BORDER-TOP: 2px solid black; BORDER-LEFT: 2px solid black; BORDER-BOTTOM: 2px solid black; BORDER-COLLAPSE: collapse; WIDTH: 640px; height: 930px; text-align: center;" align="center" border="1">
            <tr>
                <td style="width: 16%; height: 25px;">样品编号</td>
                <td style="width: 34%;">
                    <input type="text" id="typbh" style="width: 100%" value="@Model.SJBH" readonly="readonly" />
                </td>
                <td style="width: 16%;">试验日期</td>
                <td>
                    <input type="text" id="tsyrq" style="width: 100%" value="@Model.SYRQ" readonly="readonly" />
                </td>
            </tr>
            <tr>
                <td style="height: 25px;">强度等级</td>
                <td>
                    <input type="text" id="tqddj" style="width: 100%" value="@Model.SJQD" readonly="readonly" />
                </td>
                <td>龄期(d)</td>
                <td>
                    <input type="text" id="txlq" style="width: 100%" value="@Model.LQ" readonly="readonly" />
                </td>
            </tr>
            <tr>
                <td style="height: 25px;">试验尺寸</td>
                <td>
                    <input type="text" id="tsycc" style="width: 100%" value="@Model.SJCC" readonly="readonly" />
                </td>
                <td> </td>
                <td width="34%"  >   </td>
            </tr>
            <tr>
                <td>工程部位及用途</td>
                <td colspan="3">
                    <label style="width: 100%;font-weight: normal;">@Model.CJMC</label>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="padding: 0px;">
                    <table id="Table2" style="WIDTH: 100%; border: none; HEIGHT: 100%; TEXT-ALIGN: center; BORDER-BOTTOM-STYLE: none"
                           bordercolor="black" cellspacing="0" cellpadding="1" align="center" border="1" frame="void">
                        <tr>
                            <td style="height: 25px; width: 16%;">试件编号</td>
                            <td>1</td>
                            <td>2</td>
                            <td class="lastco">3</td>
                        </tr>
                        <tr>
                            <td style="height: 25px;">荷载(kN)</td>
                            <td>
                                <input type="text" id="thz1" style="width: 100%" value="@(Model.Yljs.Count > 0 ? @Model.Yljs[0].KYLZ : string.Empty) " readonly="readonly" />
                            </td>
                            <td>
                                <input type="text" id="thz2" style="width: 100%" value="@(Model.Yljs.Count > 1 ? @Model.Yljs[1].KYLZ : string.Empty) " readonly="readonly" />
                            </td>
                            <td class="lastco">
                                <input type="text" id="thz3" style="width: 100%" value="@(Model.Yljs.Count > 2 ? @Model.Yljs[2].KYLZ : string.Empty) " readonly="readonly" />
                            </td>
                        </tr>
                        <tr>
                            <td style="height: 25px;">强度(MPa)</td>
                            @for (int i = 0; i < 3; i++)
                            {
                                <td>
                                    <input type="text" id="tqd@(i+1)" style="width: 100%" value="@((Model.Yljs.Count>i&&Model.Yljs[i]!=null)?Model.Yljs[i].KYQD:"")" readonly="readonly" />
                                </td>
                            } 
                        </tr>
                        <tr>
                            <td style="height: 25px;">强度测定值(MPa)</td>
                            <td colspan="3" class="lastco">
                                <input type="text" id="tqdcdz" style="width: 100%" value="@Model.QDDBZ" readonly="readonly" />
                            </td>
                        </tr>
                        @for (int i = 0; i < 3; i++)
                        {
                            <tr>
                                <td>
                                    试<br />
                                    件<br />
                                    @(i + 1)<br />
                                    的<br />
                                    数<br />
                                    据<br />
                                    图<br />
                                    形
                                </td>
                                <td colspan="3" style="width:536px">
                                    <a id="link@(i + 1)" title="查看原图" target="_blank">
                                        <img id="pic@(i + 1)" src="@pic[i] " alt="" style="width: 90%; max-height: 210px;" />
                                    </a>
                                    <input id="txtLabel@(i + 1)" style="display: none;" value="@labels[i]" />
                                    <input id="txtData@(i + 1)" style="display: none;" value="@txtDatas[i]" />
                                    <canvas id="canvas@(i + 1)" style="width: 460px; height: 210px; display: none; margin: 0 auto;"></canvas>
                                </td>
                            </tr>
                        }
                    </table>
                </td>
            </tr>
        </table>
    </form>

</body>
</html>
