@using Dos.ORM.Web.App_Common.Mvc
@model Dos.ORM.Model.Business.BUS_User
@{
    ViewBag.Title = "用户管理";
    Layout = "~/Views/BasePage/_LayoutMsSysDetailSingle.cshtml";
}
<form class="easyui-form" id="frmMain" method="post">
    <table class="frm-tb">
        <tbody>
            <tr>
                <td>账户:</td>
                <td>@Html.ExtTextBoxFor(m => m.Account, new { required = true, validType = "maxLength[100]" })</td>
                <td>密码:</td>
                <td>@Html.ExtTextBoxFor(m => m.Password, new { required = true, type = "password", validType = "maxLength[100]" })</td>
            </tr>
            <tr>
                <td>手机号码:</td>
                <td>@Html.ExtTextBoxFor(m => m.Mobile, new { validType = "mobile" })</td>
                <td>姓名:</td>
                <td>@Html.ExtTextBoxFor(m => m.FullName, new { required = true, validType = "maxLength[100]" })</td>
            </tr>
            <tr>
                <td>职位:</td>
                <td>@Html.ExtTextBoxFor(m => m.Job, new { validType = "maxLength[100]" })</td>
                <td>机构名称:</td>
                <td>@Html.ExtTextBoxFor(m => m.OrganName, new { validType = "maxLength[100]" })</td>
            </tr>
            <tr>
                <td>是否启用：</td>
                <td>
                    @Html.ExtRadioBoxList(m => m.是否启用, (SelectList)ViewBag.StatusType, new { id = "thisIsEnable" })
                </td>
                <td>所属角色
                </td>
                <td>
                    @Html.ExtDropDownFor(m => m.所属角色, ViewBag.RoleModel as SelectList, new { required = true })
                </td>
        </tbody>
    </table>
</form>
<script>
    var thisForm,
        oType = '@ViewBag.oType';


    $(function () {
        initData();
    });

    function initData() {
        thisForm = $('#frmMain');
    }

    function saveData() {
        QBO.frm.submit(thisForm, {
            url: '/MsManage/User/SaveData',
            onSubmit: function (param) {
                param.是否启用 = $('#thisIsEnable').checkbox('getValue').IsEnable;
            },
            success: function (data) {
                QBO.dia.msg(data.Msg, {
                    icon: data.Result === 100 ? 'right' : 'error',
                    endCallback: function () {
                        if (data.Result === 100) {
                            QBO.frm.closeWin(function () { QBO.frm.getWin().reloadGridData(); });
                        }
                    }
                });
            }
        });
    }

</script>
