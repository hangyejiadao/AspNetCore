@using Dos.ORM.Web.App_Common.Mvc
@model Dos.ORM.Model.Business.BUS_Laboratory
@{
    ViewBag.Title = "试验室管理";
    Layout = "~/Views/BasePage/_LayoutMsSysDetailSingle.cshtml";
}
<form class="easyui-form" id="frmMain" method="post">
    <table class="frm-tb">
        <tbody>
            @Html.HiddenFor(p => p.SeniorTitleNumber)
            <tr>
                @Html.HiddenFor(m => m.OrganID)
                <td>试验室名称:</td>
                <td colspan="3">@Html.ExtTextBoxFor(m => m.OrganName, new { width = 630 })</td>
            </tr>
            <tr>
                <td>简称:</td>
                <td>@Html.ExtTextBoxFor(m => m.OrganShorName)</td>
                <td>排序:</td>
                <td>@Html.ExtTextBoxFor(m => m.OrderNum)</td>
            </tr>
            <tr>
                <td>授权机构:</td>
                <td colspan="3">@Html.ExtTextBoxFor(m => m.CompanyName, new { width = 630 })</td>
            </tr>
            <tr>
                <td>等级证书:</td>
                <td>@Html.ExtTextBoxFor(m => m.CompanyCertificate)</td>
                <td>证书编号:</td>
                <td>@Html.ExtTextBoxFor(m => m.CertificateCode)</td>
            </tr>
            <tr>
                <td>设立日期:</td>
                <td>@Html.ExtDatetimeBoxFor(m => m.LabCreateDate)</td>
                <td>试验检测工程师(人):</td>
                <td>@Html.ExtTextBoxFor(m => m.EngineerNumber)</td>
            </tr>
            <tr>
                <td>试验检测员(人):</td>
                <td>@Html.ExtTextBoxFor(m => m.TestNumber)</td>
                <td>试验检测用房总面积(m<sup>2</sup>):</td>
                <td>@Html.ExtTextBoxFor(m => m.Area)</td>
            </tr>
            <tr>
                <td>授权负责人:</td>
                <td>@Html.ExtTextBoxFor(m => m.DirectorCertificate)</td>
                <td>证书编号:</td>
                <td>@Html.ExtTextBoxFor(m => m.DirectorName)</td>
            </tr>
            <tr>
                <td>职称:</td>
                <td>@Html.ExtTextBoxFor(m => m.Title)</td>
                <td>联系电话:</td>
                <td>@Html.ExtTextBoxFor(m => m.Mobile)</td>
            </tr>
            <tr>
                <td>工地试验室地址:</td>
                <td colspan="3">@Html.ExtTextBoxFor(m => m.Add, new { width = 630 })</td>
            </tr>
            <tr>
                <td>邮编:</td>
                <td>@Html.ExtTextBoxFor(m => m.Code)</td>
                <td>办公联系电话:</td>
                <td>@Html.ExtTextBoxFor(m => m.Tel)</td>
            </tr>
            <tr>
                <td>授权业务范围:</td>
                <td colspan="3">@Html.ExtTextBoxFor(m => m.BusinessRange, new { width = 630 })</td>
            </tr>
        </tbody>
    </table>
</form>
<script>
    var thisForm;

    $(function () {
        initData();
    });

    function initData() {
        thisForm = $('#frmMain');
    }

    function saveData() {
        saveLab();
    }

    function saveLab() {
        QBO.frm.submit(thisForm, {
            url: '/MsManage/Project/SaveLabData',
            onSubmit: function (param) {
                //父Id
                //if (QBO.plu.zt.get('zTreePanel').str.length > 0) {
                //    param.ParentID = QBO.plu.zt.get('zTreePanel').str;
                //}
                //param.是否隐藏 = $('#thisIsHide').checkbox('getValue').IsHide;
            },
            success: function (data) {
                QBO.dia.msg(data.Msg, {
                    icon: data.Result === 100 ? 'right' : 'error',
                    endCallback: function () {
                        if (data.Result === 100) { QBO.frm.closeWin(function () { QBO.frm.getWin().reloadGridData('tg'); }); }
                    }
                });
            }
        });
    }
</script>
